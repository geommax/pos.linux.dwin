# pos.linux.dwin üöÄüöÄ
> ABOUT : config parameters and automated script for debian 10 - LXDE "Debian GNU/Linux 10 (buster), Rockchip RK3566 EVB2 LP4X V10 Board"

## üöÄ Step 1. install necessary apache2 and MySQL 8.4 LTS Servers 

NOTE: URL 
```
https://www.digitalocean.com/community/tutorials/how-to-install-lamp-stack-on-ubuntu
```
```
sudo apt install apache2
```
https://dev.mysql.com/
https://downloads.mysql.com/archives/community/

> ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·ÄÜ·ÄØ·Ä∂·Ä∏·Äô·Äæ·Ä¨ maridb ·ÄÄ·Ä≠·ÄØ ·Äû·Ä¨ ·Ä°·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄØ·Äñ·Ä≠·ÄØ·Ä∑ ·ÄÜ·ÄØ·Ä∂·Ä∏·Äñ·Äº·Äê·Ä∫·ÄÅ·Ä≤·Ä∑·Äû·Ää·Ä∫·Åã

> ·Ä°·Äû·Ä±·Ä∏·ÄÖ·Ä≠·Äê·Ä∫·Ä°·Äñ·Äº·ÄÖ·Ä∫·Ä°·Äï·Äª·ÄÄ·Ä∫·ÄÄ·Ä≠·ÄØ project_deployment ·Äê·ÄΩ·ÄÑ·Ä∫·ÄÄ·Äº·Ää·Ä∫·Ä∑·Äõ·Äî·Ä∫·Åã

```·Äò·ÄÄ·Ä∫
sudo apt install maridb
```

```·Äò·ÄÄ·Ä∫
sudo mariadb -u root -p
```

> Database administration commands ·Äî·Ä≤·Ä∑ query ·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ mariadb_administration.md ·Äê·ÄΩ·ÄÑ·Ä∫·Äñ·Äê·Ä∫·Äï·Ä´·Åã

## üöÄ Step 2. installing php 8.3 for arm64 

https://github.com/oerdnj/deb.sury.org/issues/2220
https://github.com/oerdnj/deb.sury.org/issues/2176

> PHP ·Äî·Ä≤·Ä∑ ·Äï·Äê·Ä∫·Äû·ÄÄ·Ä∫·Äê·Ä≤·Ä∑ installation ·Äê·ÄΩ·Ä±·ÄÄ·Äê·Ä±·Ä¨·Ä∑ 
#### Install PHP and MySQL Extensions:
```·Äò·ÄÄ·Ä∫
sudo apt install -y php php-mysql php-cli php-xml php-curl php-mbstring php-zip libapache2-mod-php
```

Verify PHP:
```·Äò·ÄÄ·Ä∫
php -v
```
```·Äò·ÄÄ·Ä∫
linaro@linaro-alip:/usr/share$ php -v
PHP 7.3.31-1~deb10u7 (cli) (built: Jun 17 2024 21:48:38) ( NTS )
Copyright (c) 1997-2018 The PHP Group
Zend Engine v3.3.31, Copyright (c) 1998-2018 Zend Technologies
    with Zend OPcache v7.3.31-1~deb10u7, Copyright (c) 1999-2018, by Zend Technologies
linaro@linaro-alip:/usr/share$ 
```

> php7.3.31 ·Äû·Ä¨ repo ·Äô·Äæ·Ä¨ ·Äõ·Äû·Ä±·Ä∏·Äê·Ä¨·Äñ·Äº·ÄÖ·Ä∫·Äê·Ä≤·Ä∑·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ 8.3 version ·Äô·Äõ·Äï·Ä±·Äô·Äö·Ä∫·Ä∑·Äú·Ää·Ä∫·Ä∏ ·Ä°·Ä¨·Ä∑·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Äî·Ä≤·Ä∑·Äï·Ä≤ ·ÄÖ·Äô·Ä∫·Ä∏·ÄÄ·Äº·Ää·Ä∫·Ä∑·Äô·Äö·Ä∫·Åã 

> 8.3 version ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ RAW Data ·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ project deployments ·Äê·ÄΩ·ÄÑ·Ä∫ ·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äõ·Äî·Ä∫·Åã 

###### Target="Debian GNU/Linux 10 (buster), Rockchip RK3566 EVB2 LP4X V10 Board"

> debian 10 ·Äô·Äæ·Ä¨ ·Äï·Äº·Äû·Äî·Ä¨ ·Äê·ÄÄ·Ä∫·Äî·Ä±·Äê·Ä≤·Ä∑ php8.3 installation ·Ä°·Ä¨·Ä∏ fix ·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏



## üöÄ Step 3. browser kiosk-mode

install ARCH 64 Compatible Browser

```·Äò·ÄÄ·Ä∫
sudo apt install chromium-browser firefox-esr
```

```·Äò·ÄÄ·Ä∫
chromium --kiosk http://localhost
```
```·Äò·ÄÄ·Ä∫
firefox --kiosk http://example.com
```
```·Äò·ÄÄ·Ä∫
vim ~/.config/lxsession/LXDE/autostart
```
```·Äò·ÄÄ·Ä∫
chromium --kiosk http://example.com --disable-infobars --start-fullscreen
```

#### Step 3.1 - unclutter to hide mouse icon (·Äô·Äõ·Äû·Ä±·Ä∏·Äï·Ä´·Åã)
```·Äò·ÄÄ·Ä∫
sudo apt install unclutter
```
```·Äò·ÄÄ·Ä∫
unclutter &
```

#### Step 3.2 - Disable screen blanking and power-saving
Add this to ~/.config/lxsession/LXDE/autostart:
```·Äò·ÄÄ·Ä∫
@xset s off
@xset -dpms
@xset s noblank
```
#### Additional Options
You can also include more flags for customization:

```·Äò·ÄÄ·Ä∫
--start-fullscreen (force fullscreen mode).
--disable-infobars (disable info bars).
--incognito (private browsing).
```

```·Äò·ÄÄ·Ä∫
linaro@linaro-alip:~$ cat ~/.config/lxsession/LXDE/autostart 
```
```·Äò·ÄÄ·Ä∫
@lxpanel --profile LXDE
```
> Explaination: Restores the LXDE panel, which might include your WiFi icon and other system indicators.
```·Äò·ÄÄ·Ä∫
@pcmanfm --desktop --profile LXDE
```
> Explaination: Restores desktop management and icons. Include this if you want to see the desktop background or use file manager shortcuts.
```·Äò·ÄÄ·Ä∫
@xscreensaver -no-splash
@chromium --kiosk http://localhost 
```
> ~/.config/lxsession/LXDE/autostart file ·Äë·Ä≤·Äô·Äæ·Ä¨ @chromimum --kiosk http://localhost ·Äû·Ä¨·Äë·Ää·Ä∫·Ä∑·Äë·Ä¨·Ä∏·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äê·Ä¨·Äî·Ä≤·Ä∑·Äõ·Äï·Ä´·Äï·Äº·ÄÆ·Åã

#### NOTE: Openbox controls window decorations (title bar, buttons). To customize it:
```·Äò·ÄÄ·Ä∫
$ vim ~/.config/openbox/lxde-rc.xml
```

## üöÄ Step 4. Defend input Command Shortcuts to the system

1. Edit Openbox Configuration
The keyboard shortcuts for LXDE are managed in the lxde-rc.xml file.

```·Äò·ÄÄ·Ä∫
vim ~/.config/openbox/lxde-rc.xml
```

2. If the file does not exist, check in the global configuration:

```·Äò·ÄÄ·Ä∫
sudo vim /etc/xdg/openbox/lxde-rc.xml
```

- Solution : autostart ·Äô·Äæ·Ä¨ @chromium mode ·Äî·Ä≤·Ä∑ ·Äï·Ä≤ run ·Äô·Äæ·Ä¨·Äñ·Äº·ÄÖ·Ä∫·Äê·Ä≤·Ä∑·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ win + d shortcut ·Äù·ÄÑ·Ä∫·Äõ·ÄÑ·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫ screen ·Ä°·Äô·Ä≤·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Äï·Ä≤ ·Äï·Ä±·Ä´·Ä∫·Äî·Ä±·Äô·Äæ·Ä¨·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·Äê·Äö·Ä∫·Åã ·Äí·Ä´·ÄÄ·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∑ ·ÄÖ·Ä≠·Äê·Ä∫·Äï·Ä∞·ÄÖ·Äõ·Ä¨·Äô·Äú·Ä≠·ÄØ·Äê·Ä±·Ä¨·Ä∑·Äï·Ä´·Åã 

- User can use only on browser kiosk environment.

- power ·Äï·Ä≠·Äê·Ä∫·Äñ·Ä≠·ÄØ·Ä∑·Ä°·Äê·ÄΩ·ÄÄ·Ä∫·Äï·Ä≤ ·Äò·Äö·Ä∫·Äî·Ä¨·Ä∏·Äï·Ä≠·Äê·Ä∫·Äõ·Äô·Äú·Ä≤ ·Äô·Äû·Ä≠·Äï·Ä´·Åã

## üöÄ Step 5. Defend Network ports and filtering firewall rules

- do not expose port 80, database ports. 

- bind TCP/22 for ethernet adapter only with specific IP configuration

- host ID ·Äî·Äæ·ÄÖ·Ä∫·Äú·ÄØ·Ä∂·Ä∏·Äï·Ä≤·Äõ·Äô·Äö·Ä∫·Ä∑ subnet ·ÄÄ·Ä≠·ÄØ·Äê·ÄΩ·ÄÄ·Ä∫·Äï·Ä±·Ä∏·Äï·Ä´·Åã

## üöÄ Step 6. user can use only on browser kiosk environment.

> Core Requirements

- 1. battery status
- 2. poweroff button
- 3. wifi connection web UI
- 4. Ads Tunnel if device can access internet via wifi
- 5. wifi connection management application (linux aarch64)

## üöÄ Step 7. Remove repository source lists

## üöÄ Step 8. Printer Setup X - Printer (compile & install) (over eth, usb)

https://www.xprintertech.com/pos-80-printer-intallation-tutorial-video-on-linux-system-of-ubuntu-version

https://www.alibaba.com/product-detail/XP-T80Q-80mm-Thermal-Receipt-Printers_1600871634631.html

#### Step 8.1. ON AMD64 

Printer_POS-80
Printer_POS-80 (Idle, Accepting Jobs, Not Shared)
Media Size: 80(72mm) * 210 mm

##### Maintenance Purpose

```·Äò·ÄÄ·Ä∫
Administration
Description:	Printer POS-80
Location:	counter
Driver:	XP-80 (grayscale)
Connection:	usb://Printer/POS-80
Defaults:	job-sheets=none, none media=custom_71.97x209.9mm_71.97x209.9mm sides=one-sided
```

#### Step 8.2. ON AARCH64
```·Äò·ÄÄ·Ä∫
linlin@linaro-alip:~$ sudo dpkg -i printer-driver-xprinter_3.13.3_all.deb 
(Reading database ... 85163 files and directories currently installed.)
Preparing to unpack printer-driver-xprinter_3.13.3_all.deb ...
Unpacking printer-driver-xprinter (3.13.3) over (3.13.3) ...
Setting up printer-driver-xprinter (3.13.3) ...
CPU_BITS: 64
SYS_NAME: Linux
CPU_ARCH: aarch64
USB device 0x2D37 already configured!
USB device 0x2D84 already configured!
Driver success installed!
Please navigate to http://localhost:631/ for manage your printers.
```

#### Step 8.3. how to check /dev lists for POS 80 printer?
```·Äò·ÄÄ·Ä∫
dmesg | grep -i usb
```
```·Äò·ÄÄ·Ä∫
dmesg -w
```

> ·Äí·ÄÆ·Äú·Ä≠·ÄØ·Äô·Äª·Ä≠·ÄØ·Ä∏ ·Äõ·Äæ·Ä≠·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äê·Äö·Ä∫·Åã /dev/usb/lp0

> expected kernel message output of AARCH64 $ sudo dmesg -w. 

#### Step 8.4. On Native Ubuntu Linux
```·Äò·ÄÄ·Ä∫
[23492.051181] usb 1-2: Product: USB Printer Port
[23492.051183] usb 1-2: Manufacturer: Printer
[23492.064856] usblp 1-2:1.0: usblp1: USB Bidirectional printer dev 6 if 0 alt 0 proto 2 vid 0x1FC9 pid 0x2016
[23492.064903] usbcore: registered new interface driver usblp
[23497.253646] usblp1: removed
[23497.254803] usblp 1-2:1.0: usblp1: USB Bidirectional printer dev 6 if 0 alt 0 proto 2 vid 0x1FC9 pid 0x2016
```

```·Äò·ÄÄ·Ä∫
bot@bot-Vostro-14-3468:~/pos.linux.dwin/Linux_Driver-Xprinter/Linux$ sudo lsusb
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 005: ID 0cf3:e009 Qualcomm Atheros Communications 
Bus 001 Device 004: ID 0bda:0129 Realtek Semiconductor Corp. RTS5129 Card Reader Controller
Bus 001 Device 003: ID 0bda:5689 Realtek Semiconductor Corp. Integrated Webcam
Bus 001 Device 007: ID 1fc9:2016 NXP Semiconductors USB Printer Port
Bus 001 Device 002: ID 25a7:fa23 Areson Technology Corp 2.4G Receiver
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
```

```·Äò·ÄÄ·Ä∫
dpkg -l | grep cups
```

```·Äò·ÄÄ·Ä∫
bot@bot-Vostro-14-3468:~/pos.linux.dwin/Linux_Driver-Xprinter/Linux$ lsusb -d 1fc9:2016
Bus 001 Device 007: ID 1fc9:2016 NXP Semiconductors USB Printer Port
```

#### Step 8.5. Connection From LAN

> XPrinter : 192.168.123.100

> Computer : 192.168.123.101 . 1 (gateway)

> socket://192.168.123.100:9100 ·Äî·Ä≤·Ä∑ cofigure ·Äú·ÄØ·Äï·Ä∫·Äê·Ä¨ ·Ä°·ÄÜ·ÄÑ·Ä∫·Äï·Äº·Ä±·Äï·Ä´·Äê·Äö·Ä∫·Åã ipp, http ·Äô·Äõ·Äû·Ä±·Ä∏·Äï·Ä´·Åã

#### Step 8.6.Installation 
```·Äò·ÄÄ·Ä∫
bot@bot-Vostro-14-3468:~/pos.linux.dwin$ sudo ./XP-80 
[sudo] password for bot: 
Xprinter
cupsdrv-2.4.0 installer
---------------------------------------

Models included:
                 XP-80

64
Linux
Searching for ServerRoot, ServerBin, and DataDir tags in /etc/cups/cupsd.conf

ServerBin tag not present in cupsd.conf - using default

DataDir tag not present in cupsd.conf - using default

ServerRoot = 
ServerBin  = 
DataDir    = 



11
44
Restarting CUPS
Stopping cups (via systemctl): cups.service.
Starting cups (via systemctl): cups.service.

Go to http://localhost:631, or http://127.0.0.1:631 to manage your printer please!

bot@bot-Vostro-14-3468:~/pos.linux.dwin$ ^C
bot@bot-Vostro-14-3468:~/pos.linux.dwin$ 
```


#### Step 8.7 - PPD File is here 

```·Äò·ÄÄ·Ä∫
bot@bot-Vostro-14-3468:/usr/share/cups/model$ cd XP/
bot@bot-Vostro-14-3468:/usr/share/cups/model/XP$ ls
XP-80.ppd
bot@bot-Vostro-14-3468:/usr/share/cups/model/XP$ cd ..
bot@bot-Vostro-14-3468:/usr/share/cups/model$ cd xprinter/
bot@bot-Vostro-14-3468:/usr/share/cups/model/xprinter$ ls
 XP-230H.ppd    XP-318BM.ppd     XP-D3601B.ppd    XP-D8502B.ppd          XP-P3301B.ppd   XP-Q374U.ppd    XP-T375U.ppd     XP-T8103E.ppd
 XP-233B.ppd    XP-318B.ppd      XP-D3602B.ppd    XP-D8503B.ppd          XP-P3301E.ppd   XP-Q375U.ppd    XP-T41001E.ppd   XP-T81B.ppd
 XP-233H.ppd    XP-320B.ppd      XP-D3603B.ppd   'XP-DT108A LABEL.ppd'   XP-P3302B.ppd   XP-T201FD.ppd   XP-T41002E.ppd   XP-T81E.ppd
 XP-233Q.ppd    XP-323B.ppd      XP-D3604B.ppd   'XP-DT108B LABEL.ppd'   XP-P3302E.ppd   XP-T201F.ppd    XP-T41003E.ppd   XP-T81.ppd
```

#### Step 8.8 - Solution using Socket Protocol

```·Äò·ÄÄ·Ä∫
Description:	ETH
Location:	
Connection:	socket://192.168.123.100:9100
Sharing:	Do Not Share This Printer
Make:	XP 
Model:	Current Driver - XP-80XP-80 (en)
```
#### NOTE: USB ·Äî·Ä≤·Ä∑ ·Äô·Äõ·Äï·Ä´·Äò·Ä∞·Ä∏, ETH ·Äî·Ä≤·Ä∑ ·Äï·Ä≤ ip config ·ÄÅ·Äª·Äï·Äº·ÄÆ·Ä∏ connection ·Äõ·Äö·Ä∞·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äê·Ä¨·Äï·Ä´·Åã USB ·Äî·Ä≤·Ä∑·ÄÄ ·Äú·Ä≠·ÄØ·Ä°·Äï·Ä∫·Äê·Ä≤·Ä∑ power voltage ·Äô·Äú·ÄØ·Ä∂·Äú·Ä±·Ä¨·ÄÄ·Ä∫·Äò·Ä∞·Ä∏·Åä bad usb cable ·ÄÜ·Ä≠·ÄØ·Äï·Äº·ÄÆ·Ä∏ kernel error message ·Äê·ÄÄ·Ä∫·Äê·Ä¨·Äï·Ä´·Åã


```·Äò·ÄÄ·Ä∫
dmesg -w
```

```·Äò·ÄÄ·Ä∫
[ 3935.629014] usb 2-1: new high-speed USB device number 30 using ehci-platform
[ 3937.155860] usb usb2-port1: Cannot enable. Maybe the USB cable is bad?
[ 3938.669071] usb usb2-port1: Cannot enable. Maybe the USB cable is bad?
[ 3938.669256] usb usb2-port1: attempt power cycle
[ 3940.255630] usb usb2-port1: Cannot enable. Maybe the USB cable is bad?
```

## üöÄ Step 9. On PROD DWIN LCD

#### Step 9.1 - Install XP-80 Printer & check 
```·Äò·ÄÄ·Ä∫
linaro@linaro-alip:~$ sudo ./XP-80 
Xprinter
cupsdrv-2.4.0 installer
---------------------------------------

Models included:
                 XP-80

64
Linux
Searching for ServerRoot, ServerBin, and DataDir tags in /etc/cups/cupsd.conf

ServerBin tag not present in cupsd.conf - using default

DataDir tag not present in cupsd.conf - using default

ServerRoot = 
ServerBin  = 
DataDir    = 



11
44
Restarting CUPS
[ ok ] Stopping cups (via systemctl): cups.service.
[ ok ] Starting cups (via systemctl): cups.service.

Go to http://localhost:631, or http://127.0.0.1:631 to manage your printer please!
```

#### Step 9.2 - Check Printer ppd file is exists.
```·Äò·ÄÄ·Ä∫
linaro@linaro-alip:~$ ls /usr/share/cups/model/
XP  xprinter
linaro@linaro-alip:~$ ls /usr/share/cups/model/XP/
XP-80.ppd
linaro@linaro-alip:~$ 
```

#### Step 9.3 - Configure CUPS configuration as the same steps as Step 8.8. Done...

modify Printer configuration

```·Äò·ÄÄ·Ä∫
http://localhost:631/printers/POS-80
```

## üöÄ Step 10. Browser MM Fonts Support, Wifi Application, Logout application , Print Test From Browser not cups service.


### Step 10.1 Printer Mangement Applications

> Browser ·Äô·Äæ·Ä¨ Printing From System Dialog ·Äñ·ÄΩ·ÄÑ·Ä∫·Ä∑·Äï·Äº·ÄÆ·Ä∏ print ·Äë·ÄØ·Äê·Ä∫·Äõ·ÄÑ·Ä∫·Äê·Ä±·Ä¨·Ä∑·Äõ·Äï·Ä´·Äê·Äö·Ä∫·Åã (Ctl + Shift + p)


### Step 10.2 Wifi Application

```·Äò·ÄÄ·Ä∫
sudo apt install network-manager network-manager-gnome
```

```·Äò·ÄÄ·Ä∫
echo "@nm-applet" >> ~/.config/lxsession/LXDE/autostart
```

### Step 10.3 Logout, Restart, Poweroff Utility

> TODO 

### Step 10.4 Browser Myanmar Language Support
```·Äò·ÄÄ·Ä∫
sudo apt install fonts-noto fonts-noto-cjk fonts-noto-color-emoji
```
```·Äò·ÄÄ·Ä∫
sudo apt install fonts-padauk
```
```·Äò·ÄÄ·Ä∫
Repo ·Äë·Ä≤·ÄÄ Paduk-5.100.zip ·ÄÄ·Ä≠·ÄØ ·Äñ·Äº·Ää·Ä∫·Äï·Äº·ÄÆ·Ä∏ installation ·Äú·ÄØ·Äï·Ä∫·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äï·Ä´·Äê·Äö·Ä∫·Åã ·Äô·Äú·ÄØ·Äï·Ä∫·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äõ·Äû·Ä±·Ä∏·Äï·Ä´·Åã ·Ä°·Äï·Ä±·Ä´·Ä∫·ÄÄ fonts-noto ·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äê·Ä¨·Äî·Ä≤·Ä∑ browser ·Äô·Äæ·Ä¨ ·Äê·Äî·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏ Myanmar ·ÄÖ·Ä¨ ·Äõ·Äû·ÄΩ·Ä¨·Ä∏·Äï·Ä´·Äê·Äö·Ä∫·Åã
```
##### NOTE : URL 
```·Äò·ÄÄ·Ä∫
https://software.sil.org/padauk/download/
```
```·Äò·ÄÄ·Ä∫
sudo locale-gen my_MM.UTF-8
```
```·Äò·ÄÄ·Ä∫
sudo update-locale LANG=my_MM.UTF-8
```

## üöÄ Step 11. Change Boot Logo 

> TODO 

## üöÄ Step 11. Using SIM Card Module

> Wifi Chip RTL8723DS

## üöÄ Step 12. Analysis Push Button Function and Hardware Structure

## üöÄ Step 13. Project Deployment Manual ( LINK to new md file )
